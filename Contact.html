<!DOCTYPE html>
<!--
    This is the initial draft using a new formatting technique and style.
    Some inspiration taken from various sources.
-->
<html lang="en-us">
    <head>
        <title>Narangba Internal Data Centre</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <link rel="stylesheet" href="Assets/css/Style.css">
    </head>
    <body class="body">
        <div class="header">
            <div class="logo">
                <img src="Assets/images/Pure-_-Dark-Blue.png" alt="Pure Environmental Pty Ltd"/>
			</div>
            <h1 class="title">Narangba</h1>
			<!-- Nav -->
			<nav class="nav">
				<ul>
                    <li><a href="Index.html">Home</span></a></li>
					<li><a href="Lab-Data.html">Laboratory Data</span></a></li>
					<li><a href="Information.html">Information</span></a></li>
                </ul>
			</nav>
        </div>
        <div class="main">
            <div class="decal">
                <img src="Assets/images/Horizontal_Decal.png" alt="PureNV-Decal"/>
            </div>
            <h2 class=contact-big>Looking to reach out?</h2>
            <h4 class="contact-small">Currently, minimal development changes are being made, as the base system is being standardized to Pure Environmental QLD. However, if you wanted to leave a comment here, it will be reviewed as soon as possible.</h4>
            <form id="feedbackForm" class="feedback-form" method="POST">
                    <label for="name" class="name-label">Name:</label>
                    <input type="text" id="name" name="name" class="name-box" required>
                    <label for="feedback" class="feedback-label">Your Feedback:</label>
                    <textarea id="feedback" name="feedback" class="feedback-box" required></textarea>
                <button id="submit "type="submit" class="submit-button" onclick="feedbackSubmit()">Submit</button>
                <p id="p01"></p>
            </form>
            <script>
                function feedbackSubmit() {
                    const message=document.getElementById("p01");
                    message.innerHTML = "";
                    const sql = require("mssql");
                    const formData = {
                        name: document.getElementById("name").value,
                        feedback: document.getElementById("feedback").value
                    };
                    
                    const config = {
                    user: "rpope@purenv.au",
                    password: "Red-R0ck6341",
                    server: "purenvqld.database.windows.net:1433",
                    database: "Feedback",
                    options: {
                        encrypt: true, // Required for Azure SQL
                        trustServerCertificate: false
                    }};

                    async function insertFeedback(name, feedback) {
                    try {
                        let pool = await sql.connect(config);
                        let result = await pool.request()
                            .input("Name", sql.VarChar, name)
                            .input("Feedback", sql.Text, feedback)
                            .query("INSERT INTO feedback (Name, Feedback) VALUES (@name, @feedback)");

                        console.log("Feedback submitted successfully!");
                    } catch (err) {
                        console.error("Error submitting feedback:", err);
                    } finally {
                        document.getElementById("name").value="",
                        document.getElementById("feedback").value="";
                    }
                }
                }
            </script>
            <div id="responseMessage" class="feedback-resp"></div>
            <footer class="footer">
            <p class="footertext">Got a recommendation or a problem that needs solving? Contact us <a class="cont-lk" onclick="href='Contact.html'">here!</a></p>
        </footer>
    </body>
</html>